{% extends 'base.html' %}
{% block content %}
<div class="pagetitle">
  <h1>User Management</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item active">User Management</li>
    </ol>
  </nav>
</div><!-- End Page Title -->

<section class="section dashboard">
  <div class="row">

    <!-- Left side columns -->
    <div class="col-lg-8">
      <div class="row">
        <!-- Recent Sales -->
        <div class="col-12">
          <div class="card recent-sales overflow-auto">        
            <div class="card-body">
              <h5 class="card-title"> Register User</h5>

                  {% if error %}
                      <span class="bg bg-danger">{{ error}}</span>
                  {% endif %}

                  {% if msg %}
                  <span class="bg bg-success">{{ msg}}</span>
              {% endif %}
             
            <form class="row g-3" method="post" action="/user/register">
                <div class="col-12">
                  <label for="fname" class="form-label">Full Name</label>
                  <input type="text" onkeyup="createUsername()" class="form-control" id="fname" name="fname" placeholder="Enter full name">
                </div>
                <div class="col-12">
                  <label for="role" class="form-label">Role</label>
                  <select  class="form-control"  id="role" name="role">
                   <option value="admin">Admin</option>
                   <option value="dispatch">Dispatch</option>
                </select>
                </div>
                <div class="col-12">
                  <label for="username" class="form-label">User</label>
                  <input type="text" class="form-control"  id="username" name="username">
                </div>
                <div class="col-12">
                  <label for="password" class="form-label">Password</label>
                  <input type="password" class="form-control" id="password" name="password">
                </div>
                <button type="submit" class="btn btn-primary text-white">Save changes</button>
              </form><!-- Vertical Form -->
              
            </div>

          </div>
        </div><!-- End Recent Sales -->

        <script>
            function createUsername(){
                var fullname = document.getElementById("fname").value;
                var part1 = fullname.split(" ")[0].toLowerCase()
                var part2 = fullname.split(" ")[1] ? fullname.split(" ")[1].toLowerCase() : " "
                var final = part1+""+part2.slice(0,1)
                console.log(final);

                document.getElementById("username").value = final

            }
        </script>
      </div>
    </div><!-- End Left side columns -->

 
  </div>
</section>


{% endblock %}